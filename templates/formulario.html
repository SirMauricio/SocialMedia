{% extends "base.html" %}
{% block title %}Formulario de Evaluación{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2 class="mb-4">Formulario de Evaluación del Uso de Redes Sociales</h2>

  {% if errores %}
    <div class="alert alert-danger">
      <ul>
        {% for error in errores %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <form method="POST" action="/formulario" novalidate>
    <div class="mb-3">
      <label for="Age" class="form-label">Edad</label>
      <input type="number" class="form-control" name="Age" min="14" max="100" required>
      <div class="invalid-feedback">Ingrese una edad válida (14-100 años).</div>
    </div>

    <div class="mb-3">
      <label for="Gender" class="form-label">Género</label>
      <select class="form-select" name="Gender" required>
        <option value="">Seleccione</option>
        <option value="Male">Masculino</option>
        <option value="Female">Femenino</option>
        <option value="Other">Otro</option>
      </select>
      <div class="invalid-feedback">Seleccione una opción.</div>
    </div>

    <div class="mb-3">
      <label for="Academic_Level" class="form-label">Nivel Académico</label>
      <select class="form-select" name="Academic_Level" required>
        {% for nivel in niveles %}
          <option value="{{ nivel }}">{{ nivel }}</option>
        {% endfor %}
      </select>
      <div class="invalid-feedback">Seleccione el nivel académico.</div>
    </div>

    <div class="mb-3">
      <label for="Country" class="form-label">País</label>
      <select class="form-select" name="Country" required>
        {% for pais in paises %}
          <option value="{{ pais }}">{{ pais }}</option>
        {% endfor %}
      </select>
      <div class="invalid-feedback">Seleccione un país.</div>
    </div>

    <div class="mb-3">
      <label for="Avg_Daily_Usage_Hours" class="form-label">Horas promedio de uso diario</label>
      <input type="number" class="form-control" name="Avg_Daily_Usage_Hours" min="0" max="24" step="0.1" required>
      <div class="invalid-feedback">Ingrese un valor entre 0 y 24.</div>
    </div>

    <div class="mb-3">
      <label for="Most_Used_Platform" class="form-label">Plataforma más usada</label>
      <select class="form-select" name="Most_Used_Platform" required>
        {% for plataforma in plataformas %}
          <option value="{{ plataforma }}">{{ plataforma }}</option>
        {% endfor %}
      </select>
      <div class="invalid-feedback">Seleccione una plataforma.</div>
    </div>

    <div class="mb-3">
      <label for="Sleep_Hours_Per_Night" class="form-label">Horas de sueño por noche</label>
      <input type="number" class="form-control" name="Sleep_Hours_Per_Night" min="0" max="24" step="0.1" required>
      <div class="invalid-feedback">Ingrese un valor entre 0 y 24.</div>
    </div>

    <div class="mb-3">
      <label for="Relationship_Status" class="form-label">Estado Civil</label>
      <select class="form-select" name="Relationship_Status" required>
        {% for estado in estados %}
          <option value="{{ estado }}">{{ estado }}</option>
        {% endfor %}
      </select>
      <div class="invalid-feedback">Seleccione su estado civil.</div>
    </div>

    <div class="mb-3">
      <label for="Conflicts_Over_Social_Media" class="form-label">Conflictos en redes sociales (0: Nunca, 5: Siempre)</label>
      <input type="number" class="form-control" name="Conflicts_Over_Social_Media" min="0" max="5" step="1" required>
      <div class="invalid-feedback">Ingrese un número entre 0 y 5.</div>
    </div>

    <div class="text-end">
      <button type="submit" class="btn btn-primary">Enviar</button>
    </div>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    form.addEventListener("submit", function (event) {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
        form.classList.add('was-validated');
      }
    }, false);
  });
</script>
{% endblock %}
